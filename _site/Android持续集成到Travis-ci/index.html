<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Android持续集成到Travis-ci - Kong Jing</title>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,300,700" type="text/css">
    <link rel="stylesheet" href="/static/app.css" type="text/css">
    <link rel="stylesheet" href="/static/syntax.css" type="text/css">
    <link type="application/atom+xml" rel="alternate" href="http://budepie.com/feed.xml" title="Kong Jing" />
    <meta name="theme-color" content="#111111">

    <meta name="og:type" content="article">
    <meta name="og:title" content="Post: Android持续集成到Travis-ci">
    <meta name="og:description" content="持续集成">
    <meta name="og:site_name" content="Kong Jing">
    <meta name="og:url" content="http://budepie.com/Android%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%88%B0Travis-ci/">
    
    <meta property="article:published_time" content="2017-09-12">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    <meta name="twitter:domain" content="knjin.com">
    <meta name="twitter:title" content="Post: Android持续集成到Travis-ci">
    <meta name="twitter:description" content="持续集成">
    
    <meta name="twitter:url" content="http://budepie.com/Android%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E5%88%B0Travis-ci/">
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=58399545" charset="UTF-8"></script>

  </head>
  <body>
    <header>
      <h1><a href="/">Kong Jing</a></h1>
    </header>

    <div class="content post">
      <h2>Android持续集成到Travis-ci</h2>
      <p class="date">12 September 2017</p>

      <p>在github上的项目可以使用<a href="https://www.travis-ci.org/">Travis-ci</a>进行持续集成。</p>

<p>在项目中部署一个文件，后缀名为<code class="highlighter-rouge">.travis.yml</code></p>

<p>这里是官方的说明<a href="https://docs.travis-ci.com/user/languages/android"><strong>Building an Android Project</strong></a></p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">android</span><span class="pi">:</span>
  <span class="s">components</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">tools</span>
    <span class="pi">-</span> <span class="s">platform-tools</span>
    <span class="pi">-</span> <span class="s">tools</span>

    <span class="c1"># The BuildTools version used by your project</span>
    <span class="pi">-</span> <span class="s">build-tools-25.0.0</span>

    <span class="c1"># The SDK version used to compile your project</span>
    <span class="pi">-</span> <span class="s">android-25</span>
</code></pre>
</div>

<p>在项目中添加了上面的文件后，只要点开运行，就可以看到了。</p>

<p><em>问题</em>：</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>Travis-ci <span class="nb">command</span> <span class="s2">"./gradlew build"</span> exited with 1.
</code></pre>
</div>

<p>我的 <strong>script</strong> 部分如下:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>script:
- chmod +x ./gradlew
</code></pre>
</div>

<p>最终如下可以执行通过</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">language</span><span class="pi">:</span> <span class="s">android</span>
<span class="s">android</span><span class="pi">:</span>
<span class="s">components</span><span class="pi">:</span>
<span class="c1"># Uncomment the lines below if you want to</span>
<span class="c1"># use the latest revision of Android SDK Tools</span>
<span class="pi">-</span> <span class="s">platform-tools</span>
<span class="pi">-</span> <span class="s">tools</span>

<span class="c1"># The BuildTools version used by your project</span>
<span class="pi">-</span> <span class="s">build-tools-25.0.0</span>

<span class="c1"># The SDK version used to compile your project</span>
<span class="pi">-</span> <span class="s">android-25</span>


<span class="c1"># Specify at least one system image,</span>
<span class="c1"># if you need to run emulator(s) during your tests</span>
<span class="c1"># - sys-img-armeabi-v7a-android-22</span>
<span class="c1"># - sys-img-armeabi-v7a-android-17</span>

<span class="s">script</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">chmod +x ./gradlew</span>

</code></pre>
</div>



      <p class="signature">&mdash; Kong Jing</p>
    </div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9736314994574155",
    enable_page_level_ads: true
  });
</script>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=63637859" charset="UTF-8"></script>

  </body>
</html>
